---
title: "TLS v1.2 Configuration and Connection Errors"
order: 7
hidden: true
---

<div class="attention technical"><section class="errorBox"><div class="title"><img src="/resources/docs/technical(1).png" class="fr-fil fr-dib" style="box-sizing: border-box; border-style: none; vertical-align: top; cursor: pointer; padding: 0px 1px; position: relative; max-width: 100%; margin: 5px auto 5px 0px; display: block; float: none; text-align: left; color: rgb(34, 34, 34); font-family: Nunito, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: 0.48px; orphans: 2; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"></div><div class="content">To jump straight to the fix, click here: <a href="#registry-fix">Registry Workaround</a></div></section>Recently, there have been an increasing number of issues for our support staff that involve our products connecting to servers that require TLS v1.2 for security reasons. Common examples include connecting to the following services:</div><ul><li>GitHub - <a href="https://githubengineering.com/crypto-deprecation-notice/" rel="noopener noreferrer" target="_blank">https://githubengineering.com/crypto-deprecation-notice/</a></li><li>Azure DevOps (formerly Visual Studio Team Services and Visual Studio Online)</li><li>Maven Central - <a href="https://blogs.apache.org/maven/entry/notice-java-6-and-7" rel="noopener noreferrer" target="_blank">https://blogs.apache.org/maven/entry/notice-java-6-and-7</a></li><li>npm registry</li><li>Inedo product update checking</li></ul><p>The failure to connect to these services typically results in some variation of the following exception logged in the product's Diagnostic Center or execution logs:</p><pre><code data-code-id="section-1718908805637">System.Net.WebException: The request was aborted: Could not create SSL/TLS secure channel.</code></pre><h2 id="background">Technical Background</h2><p>Hosted services have removed support for connections using earlier versions of the TLS protocol because they are vulnerable to attacks such as <a href="https://en.wikipedia.org/wiki/POODLE" rel="noopener noreferrer" target="_blank">POODLE</a>. Unfortunately for non-hostile consumers, this means that special consideration needs to be taken from the client-side to ensure that the correct protocol version is used.</p><h4>Why doesn't Inedo software connect with TLS v1.2 by default?</h4><p>The main reason is that our products are developed on the .NET platform, and the available protocols change depending on the <em>targeted</em> framework version when the application is built, not the <em>actual</em> framework or operating system installed on the server the product is running on. For more detailed information, see: <a href="https://docs.microsoft.com/en-us/dotnet/framework/network-programming/tls" rel="noopener noreferrer" target="_blank">Transport Layer Security (TLS) best practices with the .NET Framework</a></p><p>As of the latest major versions of each product, we target v4.5.2 of the .NET framework. In this version, TLS v1.2 is <em>not</em> one of the default values in the <code>ServicePointManager</code>, which all outbound TCP or HTTP connections use by default. If we were to target v4.7 for example, these issues would never emerge. However, changing the targeted framework is a non-starter because many of our enterprise customers cannot simply install the latest framework version without a great deal of change management bureaucracy. Historically, we have changed it twice, and only during major version upgrades (v2.0 ðŸ¡’ v3.5 ðŸ¡’ v4.5.2).</p><h4>Possible Code Fix</h4><p>Another "fix" that allows upgraded connections (though it would require new versions of the products or extensions anyway) could be achieved using the following code:</p><pre><code data-code-id="section-1718908805645">System.Net.ServicePointManager.SecurityProtocol 
|= SecurityProtocolType.Tls11 | SecurityProtocolType.Tls12;</code></pre><p>When most of BuildMaster's early code was developed, TLS v1.2 was not even finalized as a standard; and even after it became finalized, the earlier versions were de facto secure because these attacks had not been discovered yet. Of course, this fix is only temporary because the same problem will occur in the future when TLS v1.2 is deprecated and superseded by TLS v1.3 or an entirely new protocol altogether. Oh, and even Microsoft recommends against this:</p><blockquote><img src="https://inedo.com/resources/images/icons/ms.png" class="fr-fic fr-dii" style="width: 35px;">&nbsp;"To ensure .NET Framework applications remain secure, the TLS version should not be hardcoded"</blockquote><h2 id="registry-fix">Registry Workaround</h2><p>To resolve these errors, the following registry key can be added to the Inedo product server in order to force pre-v4.7-targeting .NET framework applications to use the most secure protocol established by the operating system:</p><pre><code data-code-id="section-1718908805648">Key: HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\.NETFramework\v4.0.30319
Value: SchUseStrongCrypto
Data: 1
</code></pre><p>Once this key is added (or its data set to 1), it will require the server to be rebooted.</p>
---
title: "OSS ライセンスの判別・管理とフィルタリング"
order: 1
hidden: true
---

<p>現在のソフトウェア開発では、すべてを 1 から書き上げることはまれです。多くの場合、何らかのライブラリを活用して開発の工数を節約しています。</p><p>検索すれば、Nuget ライブラリなど、たくさんのオープンソースのライブラリやパッケージがあり、さらに多くの企業が有料のライブラリ、パッケージ、ソフトウェアを有償で受注開発あるいは販売しています。</p><p>パッケージを使用すると、パッケージの開発者が提示するライセンス規約に同意したとみなされます。たいていのパッケージは、安全なのですが、GNU3 や GPL3 のように法的なリスクになりかねないライセンスもあります。</p><p>GNU3がライセンスのパッケージを使って開発をしたら、開発したアプリケーションもGNU3としてオープンソースにしなければなりません。時間と、お金と、社運をかけて作成したソフトウェアを、無料で配布しなければなりません。</p><p>注意したいのは、あなた自身ではなく、あなたが無料利用あるいは有償で購入したパッケージが、他人の GNU3 や GPL-3 などの地雷的なライセンスを使っていた場合です。</p><h2>地雷ライセンスを避けるための社内プロセス</h2><p>これを避ける方法は 2 つあります。</p><p>ライブラリや、コードのコピペではなく、Nuget などのパッケージを使うことです。パッケージとは、ライブラリに、マニフェストファイルという、バージョンやライセンス情報、そして、依存するパッケージのバージョンやライセンス情報が含み、zip 化したものです。ライセンス情報が含まれるので、簡単にどのライセンスタイプを調べられます。</p><p>もうひとつは、パッケージの検品プロセスを確立することです。開発者が、開発の際に好き勝手にパッケージをダウンロードするのではなく、専門のチームが検品した信頼できる、安全なパッケージだけを開発者が使えるようすることです。外部のパッケージのキャッシュと、社内のパッケージを保管する専用のリポジトリを作成し、開発者がそこからパッケージをダウンロードするのがよいでしょう。</p><p>例えば、食品工場では、「ケーキの材料となる牛乳がちょっと足りないから、コンビニで買ってくる」なんてしませんよね。きちん決められた場所で、決められた製品のみを材料として使用します。システム開発も同じことです。</p><h2>地雷ライセンス探知機と、検品済みリポジトリとしての ProGet</h2><p>パッケージ管理ツール ProGet には、サードパーティのオープンソースパッケージを使用する際に、地雷的なライセンスを避けるための機能が 2 つあります。</p><ul><li><strong>パッケージの脆弱性自動解析</strong>：<a href="https://www.whitesourcesoftware.com/">Whitesource</a>と連携して、オープンソースコンポーネントのソースコード解析やリポジトリ照合、独自の脆弱性データベースなどを活用した誤検出ゼロを実現します。</li><li><strong>ライセンス自動探知</strong>：パッケージと、そのパッケージが依存するパッケージのライセンスを自動で判別します。パッケージ名がない場合も、MITなどの既存ライセンスの場合は、自動で判別します。</li><li><strong>ライセンスによるフィルタリング</strong>：パッケージのライセンスの種類によって、ダウンロードを許可したりブロックしたり設定できます。</li></ul><h2>ProGet の<strong>ライセンスの検出機能とは</strong></h2><p>ProGet はパッケージのライセンス規約を自動的に検出し、各パッケージの「パッケージの概要ページ」に表示します。 ProGet には、信頼できるオープンソース ライセンス タイプのデータベースが含まれています。これらのライセンスは、ProGet 内で「known licenses (既知のライセンス)」として処理されます。</p><p>このリストは <a href="https://spdx.org/licenses">SPDX</a>（リンク先英語）をもとに作られており、つねに最新の状態に更新されています。また、ライセンスのタイプは、いつでも [Licenses (ライセンス)] &gt; [License Types (ライセンスの種類)] で編集できます。</p><p>ライセンスの種類は以下の要素から構成されています：</p><ul><li><strong>SPDX 識別子</strong>：ライセンスの種類を識別するために使われる MIT や GPL3 などのコード</li><li><strong>タイトル</strong>：MIT ライセンスや General Public License 3.0</li></ul><p>などのライセンスの詳細</p><ul><li><strong>URL</strong>：<a href="http://www.opensource.org/licenses/MIT">www.opensource.org/licenses/MIT</a> や <a href="http://www.gnu.org/licenses/gpl-3.0-standalone.html">www.gnu.org/licenses/gpl-3.0-standalone.html</a></li></ul><p>などのライセンス規約と関連するURLのリスト</p><h2><strong>不明なライセンス</strong></h2><p>パッケージの SPDX 識別子や URL がライセンスの種類のリストに入っていない、もしくはライセンスの表記が全くない場合、不明なライセンスとして認識されます。</p><p>不明なライセンスが検知された場合、ProGetからの警告が表示され、新たなライセンスの種類として保存する選択肢が提示されます。以降、同じ SPDX 識別子や URL を持つパッケージが検知された場合、新たに作成されたライセンスの種類として認識させることができます。</p><p><strong>ProGet でできるライセンスのフィルタリング</strong></p><p>ProGetでは、パッケージのライセンスの種類によって、ダウンロードを許可したりブロックしたりするように設定できます。不明なライセンスを持つパッケージのダウンロードをブロックするように設定することもできます。これらの条件はグローバルとフィード単位のどちらでも設定できます。</p><p>ライセンスのダウンロード条件を設定すると、ブロック対象のライセンスを持つパッケージには概要ページで赤色の警告が表示され、ダウンロードが拒否されます。</p><p><strong>ライセンスのダウンロード条件</strong></p><p>ライセンスのダウンロード条件は既知のライセンスの種類と、許可もしくはブロックのフラグをもとに構成されています。グローバルとフィード、両方で設定が可能です：</p><p><img src="/resources/docs/proget-jp-licenserule.png" class="fr-fil fr-dib fr-draggable"></p><p><strong>グローバルのライセンス条件</strong>：&nbsp;Licenses (ライセンス)</p><ul><li><strong>フィード毎のライセンス条件</strong>：&nbsp;[Feed&nbsp;(フィード)] &gt; [Manage Feed (フィードの管理)] &gt; [Scanning &amp; Blocking (スキャンとブロック)]</li></ul><p>グローバルとフィード両方のレベルでライセンスの条件が設定されている場合、フィードの設定が優先されます。</p><p><strong>不明なライセンスのブロック</strong></p><p>ProGetでは、グローバルとフィード両方のレベルで不明なライセンスをブロックするように設定することもできます。</p><ul><li><strong>グローバルの不明ライセンス条件</strong>：&nbsp;[Advanced Settings&nbsp;(詳細設定)]&gt;&nbsp;Feeds.AllowUnknownLicenseDownloads</li><li><strong>フィードの不明ライセンス条件</strong>：&nbsp;[Feed&nbsp;(フィード)] &gt; [Manage Feed (フィードの管理)] &gt; [Scanning &amp; Blocking (スキャンとブロック)]</li></ul><p>不明なライセンスを持つパッケージをブロックするように設定した場合、明確に許可されていないライセンスを持つパッケージもブロックされます。例えば、ライセンスのダウンロード条件が一つしか設定されておらず (例：MITのライセンスを許可する)、不明なパッケージをブロックするように設定した場合、明確に許可をしたライセンス(例：MIT)を持つパッケージのみのダウンロードが許可されます。</p>

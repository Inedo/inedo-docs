---
title: "パッケージの脆弱性自動スキャンとブロック"
order: 2
hidden: true
---

<h1 id="720d26db-b328-410c-b9db-5a0c45b379cd">パッケージの脆弱性自動スキャンとブロック</h1><p id="32b0fb83-4d07-4a34-91ca-71a6d2e2ce6b">サードパーティや、オープンソースのパッケージをアプリケーションに組み込んだり、コンテナイメージから Docker コンテナを構築する場合、同時にそれらのパッケージやコンテナイメージの脆弱性も取り入れることになります。しかし、手動ですべてのパッケージの脆弱性をチェックするのは膨大な時間がかかります。</p><p id="26056e1e-7aa8-402b-982c-3c73d63455f0">ProGet は脆弱性スキャンを自動化します。大手脆弱性スキャン専門会社3社、<a href="https://ossindex.sonatype.org/" rel="nofollow noopener noreferrer" target="_blank" translate="no">Sonatype (OSS Index)</a>、<a href="https://www.whitesourcesoftware.com/" rel="nofollow noopener noreferrer" target="_blank" translate="no">WhiteSource</a>、Red Hat (Clair) と提携し、サードパーティ パッケージと Docker コンテナイメージを自動的に検出し、米国脆弱性情報データベース (<a href="https://nvd.nist.gov/" style="box-sizing: border-box; -webkit-print-color-adjust: exact; color: inherit; text-decoration: underline;">National VulnerabilityDatabas</a>)&nbsp;などに照らし合わせます 。また、手動でも管理でき、いつでも脆弱性を再評価できます。コンテナイメージの脆弱性管理は、ProGet5.3 以降でご利用いただけます。</p><p id="b4a3dd0f-087d-483b-b756-571fb994827a">こちらの機能は、ProGet 有料版とトライアル版でご利用いただけます。</p><h2 id="25da6429-5bf8-4c41-a23d-4b6edccb345a">脆弱性のスキャンとブロックのワークフロー</h2><p id="15d61c95-182a-4071-8f9e-34f6ae78cbeb">ProGetは、脆弱性を管理するための4つのワークフローに対応しています。</p><table style="width: 100%;"><thead><tr><th style="width: 30.3327%;"><br></th><th style="width: 9.6858%; text-align: center;">手動</th><th style="text-align: center;">OSS Index</th><th style="text-align: center;">WhiteSource</th><th style="text-align: center;">Clair*</th></tr></thead><tbody><tr><td style="width: 30.3327%;">費用<br></td><td style="width: 9.6858%; text-align: center;"><br></td><td style="width: 20%; text-align: center;"><br></td><td style="width: 20%; text-align: center;">$</td><td style="width: 20%; text-align: center;"><br></td></tr><tr><td style="width: 30.3327%;">徹底度</td><td style="width: 9.6858%; text-align: center;">★☆☆<br></td><td style="width: 20%; text-align: center;">★★☆<br></td><td style="width: 20%; text-align: center;">★★★</td><td style="width: 20%; text-align: center;">★★☆<br></td></tr><tr><td style="width: 30.3327%;">脆弱なパッケージをブロック<br></td><td style="width: 9.6858%; text-align: center;">✔<br></td><td style="width: 20%; text-align: center;">✔<br></td><td style="width: 20%; text-align: center;">✔<br></td><td style="width: 20%; text-align: center;"><br></td></tr><tr><td style="width: 30.3327%;">脆弱なコンテナイメージをブロック<br></td><td style="width: 9.6858%; text-align: center;">✔<br></td><td style="width: 20%; text-align: center;"><br></td><td style="width: 20%; text-align: center;"><br></td><td style="width: 20%; text-align: center;">✔<br></td></tr><tr><td style="width: 30.3327%;">脆弱性レポートを手動で入力<br></td><td style="width: 9.6858%; text-align: center;">✔<br></td><td style="width: 20%; text-align: center;"><br></td><td style="width: 20%; text-align: center;"><br></td><td style="width: 20%; text-align: center;"><br></td></tr><tr><td style="width: 30.3327%;">ProGet内の脆弱性レポートを評価<br></td><td style="width: 9.6858%; text-align: center;">✔<br></td><td style="width: 20%; text-align: center;"><br></td><td style="width: 20%; text-align: center;"><br></td><td style="width: 20%; text-align: center;">✔<br></td></tr><tr><td style="width: 30.3327%;">パブリックデータベースを自動的に検出<br></td><td style="width: 9.6858%; text-align: center;">-</td><td style="width: 20%; text-align: center;">✔</td><td style="width: 20%; text-align: center;">✔</td><td style="width: 20%; text-align: center;">✔<br></td></tr><tr><td style="width: 30.3327%;">独自のデータベースを検出<br></td><td style="width: 9.6858%; text-align: center;">-</td><td style="width: 20%; text-align: center;">-</td><td style="width: 20%; text-align: center;">✔<br></td><td style="width: 20%; text-align: center;">-</td></tr><tr><td style="width: 30.3327%;">会員登録が必要<br></td><td style="width: 9.6858%; text-align: center;">-</td><td style="width: 20%; text-align: center;">-*</td><td style="width: 20%; text-align: center;"><a href="https://www.whitesourcesoftware.com/trial3/" rel="nofollow noopener noreferrer" target="_blank" translate="no">登録</a></td><td style="width: 20%; text-align: center;">-</td></tr></tbody></table><p>* OSS Index の利用には有料会員の登録は不要ですが、<a href="https://ossindex.sonatype.org/" style="box-sizing: border-box; -webkit-print-color-adjust: exact; color: inherit; text-decoration: underline;">アカウントの開設</a>が必要です。</p><p id="50554c16-4167-4afb-b720-50edf53ab7b5">* ProGet 5.3では Clair がサポートされており、ProGet のコンテナレジストリでのみ動作します。</p><p id="137c692f-c8b8-4074-9be8-4b43ee05b624">これらのワークフローの詳細については、OSS Index と ProGetの統合、ProGet と WhiteSourceの統合、ProGetと Clairの統合をご参照ください。</p><h1 id="2e76ecc4-98cc-46b6-92c2-2e97726cac1f">フィードと脆弱性の設定</h1><p id="c56f5ba7-c886-49d7-8a01-76080f2fd0bc">パッケージの脆弱性スキャンを自動化するには、フィードの設定が必要です。</p><p id="15905d84-c397-42e2-8176-14bc15e41a9e">手動の脆弱性レコードは、追加設定なしで追加できます。最終的な結果は同じですが、ワークフローは ProGet 内の異なる機能を使用します。</p><ul <li="" class="bulleted-list" id="0ee3e675-2c38-4afd-9026-19afe01ee48b"><li><strong style="box-sizing: border-box; -webkit-print-color-adjust: exact;">自動化された脆弱性ソースと手動の脆弱性レコード</strong>は、手動、OSS Index、Clair が管理するワークフローに使用されます。これらは ProGet に脆弱性レコードを追加するため、評価の必要があります。</li></ul><ul <li="" class="bulleted-list" id="794aed75-cac0-4da8-ac7a-d44def245dc7"><li><strong style="box-sizing: border-box; -webkit-print-color-adjust: exact;">パッケージのアクセスルール</strong>は、WhiteSource が管理するワークフローに使用されます。WhiteSource で設定されたルールに基づきパッケージのダウンロードはブロックされます。</li></ul><p id="b952b74b-e9dd-4f53-9faa-850525b04a0e">脆弱性ソースとパッケージアクセスルールは &nbsp;[Manage Feed (フィードの管理)] で設定できます。Clair は追加のセットアップが必要です。詳細は、 <a href="/docs/proget/installation/proget-old-versions-migration/proget-compliance-clair#configureproget" rel="noopener noreferrer" style="box-sizing: border-box; -webkit-print-color-adjust: exact; color: inherit; text-decoration: underline;" target="_blank">「Configuring Clair in ProGet/ProGet 内の Clairの設定（リンク先英語）」</a> の項をご参照ください。脆弱性ソースとしてOSS Index、またはパッケージアクセスルールとして WhiteSource が表示されない場合は、[Admin (管理)] &gt; [Extensions (拡張機能)] を開いて、それらの拡張機能がインストールされていることをご確認ください。</p><figure class="block-color-gray_background callout" id="aa80f5ef-7db5-4110-b995-f1c1c74faf50" style="box-sizing: border-box; -webkit-print-color-adjust: exact; margin: 1.25em 0px; break-inside: avoid; border-radius: 3px; padding: 1rem; background: rgb(235, 236, 237); color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: flex;"><div style="box-sizing: border-box; -webkit-print-color-adjust: exact; font-size: 1.5em;"><span class="icon" style="box-sizing: border-box; -webkit-print-color-adjust: exact; display: inline-block; max-width: 1.2em; max-height: 1.2em; text-decoration: none; vertical-align: text-bottom; margin-right: 0.5em;">💡</span></div><div style="box-sizing: border-box; -webkit-print-color-adjust: exact; width: 831.453px;">自動化された脆弱性ソースは、予定されたジョブを使用して脆弱性をダウンロードし、関連するフィードをチェックします。</div></figure><h2 id="595f8f53-7324-4538-9e28-7e60311f2e0f">手動で脆弱性をチェックする</h2><p id="6ffe234a-66cc-4e41-a4bf-3d2451b1725a">自動化された脆弱性ソースは、[VulnerabilityDownloader (脆弱性ダウンローダー)] タスクを実行することで、予定されたジョブをいつでも手動で実行できます。このジョブを実行するには、</p><ol <li="" class="numbered-list" id="af338444-118a-4e6c-97a6-0c2db8801421" start="1" style="box-sizing: border-box; -webkit-print-color-adjust: exact; padding-left: 0.2em;"><li>[Administration (管理)] -&gt; [Scheduled Jobs (予定されたジョブ)] ページに移動</li></ol><ol <li="" class="numbered-list" id="561e5c41-4c47-4cca-aecf-e4c0621e206c" start="2" style="box-sizing: border-box; -webkit-print-color-adjust: exact; padding-left: 0.2em;"><li>[VulnerabilityDownloader (脆弱性ダウンローダー)] タスクの右側にある緑色の再生ボタンをクリックします。</li></ol><p id="135d3f2d-38a1-47dc-87c5-981cf5de27ba">これは、システムレベルで詳細に調べるタスクです。設定されたすべてのソースの脆弱性をダウンロードし、関連するフィードの脆弱性を確認します。</p><h1 id="4241a7d1-d85b-4da8-856a-8c056e9f7ccd">ProGet の脆弱性レポートと評価</h1><p id="8eb0518a-418e-4d91-9b86-4c4203c1bfe3">手動ワークフローと OSS Index ワークフローはどちらも脆弱性レポートを使用します。脆弱性レポートは、特定のパッケージまたはパッケージのバージョン管理された範囲に既知の脆弱性があることを識別します。このレコードは、手動で入力するか、特定のフィードのパッケージに基づいて OSS Index からインポートされます。</p><p id="3c518d71-87ee-49ef-8d3e-34ee4da6346b">コンテナレポートの場合、Clair はコンテナイメージが構築されたオペレーティングシステム (OS) を特定します。その OS を使用して特定のセキュリティデータベースを検出し、脆弱性をチェックします。これらの脆弱性は、Clair が検出するように設定されたレジストリ内のコンテナの影響を受けるレイヤーに、自動的に関連付けられます。影響を受けるコンテナレイヤーのダイジェストを指定することにより、そのレイヤーに手動の脆弱性レコードを追加することもできます。</p><p id="bbfb58fa-c7ce-42f7-b17f-1344a72c06a8">新しく入力またはインポートされた脆弱性レポートは全て未評価と見なされます。脆弱性に該当するパッケージは、レポートが評価されるまでブロックされます。評価は、承認されたユーザーがレポートを確認し、評価タイプ (無視、注意、ブロック) を選択します。合わせて、オプションのコメントを残せます。</p><p id="4011dff0-a203-42f0-b29f-d728b8ac05c9"><br></p><figure class="image" id="840c4c63-e7fa-49f3-8fd0-5154040ebd21"><img src="/resources/docs/assess-workflow.svg" class="fr-fil fr-dib fr-draggable"></figure><h2 id="b6513200-1678-4a62-adc7-544b570908c9">評価の有効期限</h2><p id="03045af8-17e9-47b9-8e8b-5efc3e657205">パッケージやコンテナイメージの脆弱性に対して行う「評価」は、期限が限定されて設定されている場合があります。有効期限が切れた脆弱性レポートは、再評価しない限り「未評価」になります。</p><p id="305c1654-781f-4a87-a566-d74194bd2e65">期限切れになった場合、2つの利用方法があります。</p><ul <li="" class="bulleted-list" id="9c209535-782d-40ed-a3ef-e65dd96ef91b"><li>未評価の脆弱性を持つパッケージまたはコンテナイメージのダウンロードを許可する場合：期限切れの評価を使用してパッケージを一時的にブロックできます。</li></ul><ul <li="" class="bulleted-list" id="3747edce-d914-4f43-8f6d-dc636481ba4b"><li>評価されていない脆弱性をブロックする場合：期限切れの評価を使用して、パッケージのブロックを一時的に解除できます。</li></ul><p id="d61b7e40-6f9f-4885-a1cb-61196b75cd46">パッケージを一時的にブロックまたは解除する理由は、セキュリティの脆弱性の性質にあります。特定のパッケージまたはコンテナイメージにセキュリティの脆弱性があるからといって、アプリケーションが脆弱な側面を利用することを意味するわけではありません。 逆に、報告されている脆弱性を避けるために常に新しいバージョンを使用すると、安全性が低いことがしばしばあります。新しいバージョンには未知の脆弱性があり、それを使用してしまう可能性があるためです。</p><p id="f3a9116e-02de-47b5-bd14-55dcfbc46ea6">パッケージとコンテナイメージのブロックを一時的に解除することで、エンジニアがどのように使用しているかを定期的に確認できます。使用方法が変更されている可能性があります。</p><h1 id="3ac219fe-a637-48ca-be89-3721fe0b7982">手動の脆弱性レコード</h1><p id="8b6376a0-4404-450a-9460-bd5d7daf732e">手動の脆弱性レコードは、特定のパッケージバージョン(または<a href="/docs/proget-vulnerabilities-scanning" rel="nofollow noopener noreferrer" target="_blank" translate="no">バージョン範囲</a>)を追加するのに使用されます。また、特定のコンテナイメージレイヤーをブロックするためにも用いられます。手動の脆弱性レコードは追加の設定なしに、パッケージやコンテナイメージレイヤーに追加することができます。方法は、まずパッケージまたはコンテナイメージページの [Vulnerabilities/脆弱性] ページまたはタブへアクセスします。[Add Vulnerability/脆弱性の追加] ボタンをクリックして、フィード、パッケージ ID とバージョン、またはコンテナイメージレイヤーのダイジェスト、および脆弱性の詳細を指定します。</p><h2 id="e1fd8e1d-f72b-47ac-ad5c-c2307745a889">パッケージのダウンロードをブロックする</h2><p id="0413ee73-674f-40b2-a103-9e174272ad08">[Blocked (ブロック済み)] を選択すると、脆弱なレイヤーを含むバージョン範囲内のパッケージまたはコンテナーイメージがダウンロードされなくなります。[Vulnerabilities (脆弱性)] ページ、またはパッケージかコンテナイメージページの[Vulnerabilities (脆弱性)] タブから、脆弱性を選択して [Assess (評価)] を選択し、 [Blocked (ブロック済み)] を選択します。任意でコメントを追加できます。</p><p id="82bcf3e0-2707-450f-a0e2-a990a40b13ac">指定された範囲内のパッケージバージョン、またはブロックされた脆弱性に関連付けられたレイヤーを持つコンテナーイメージを参照すると、通常ダウンロードボタンがある場所に「Blocked (ブロック済み)」と表示されています。パッケージまたはコンテナーイメージは関連するフィード API &nbsp;からダウンロードできなくなります。</p><p id="9dc0c7f3-1c4c-4b46-ad17-c6a95941bf40">注：パッケージバージョンまたはコンテナイメージのダウンロードはブロックされていても、検索結果やリストに表示される場合があります。</p><h3 id="ca25fa9f-5489-4c51-ba83-955f62c15ac4" style="box-sizing: border-box; -webkit-print-color-adjust: exact; letter-spacing: -0.01em; line-height: 1.2; font-weight: 600; margin-bottom: 0px; font-size: 1.25rem; margin-top: 1.25rem; color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;">バージョン範囲とは</h3><p id="0b1a67ba-03b6-4f8a-9449-e687bdcc784a">手動の脆弱性レコードには、バージョン範囲構文を使用した複数のパッケージバージョンが含まれる場合があります。以下は例です。</p><div class="collection-content" id="79187c92-e89e-43f8-a81d-e5fc9c9d4d2d"><table style="width: 100%;"><thead><tr><th style="text-align: center;">範囲</th><th>意味</th></tr></thead><tbody><tr><td style="width: 50%; text-align: center;">3.0.0<br></td><td style="width: 50%; text-align: center;">バージョン = 3.0.0<br></td></tr><tr><td style="width: 50%; text-align: center;">[3.0]</td><td style="width: 50%; text-align: center;">バージョン = 3.0<br></td></tr><tr><td style="width: 50%; text-align: center;">&lt;=2.0<br></td><td style="width: 50%; text-align: center;">バージョン &lt;= 2.0<br></td></tr><tr><td style="width: 50%; text-align: center;">[1.3,1.4]<br></td><td style="width: 50%; text-align: center;">1.3 &lt;= バージョン &lt;= 1.4<br></td></tr><tr><td style="width: 50%; text-align: center;">&gt;=1.3 &lt;=1.4<br></td><td style="width: 50%; text-align: center;">1.3 &lt;= バージョン &lt;= 1.4<br></td></tr><tr><td style="width: 50%; text-align: center;">&gt;2.5<br></td><td style="width: 50%; text-align: center;">バージョン &gt; 2.5<br></td></tr><tr><td style="width: 50%; text-align: center;">&lt;=1.0,&gt;=1.2<br></td><td style="width: 50%; text-align: center;">バージョン &lt;= 1.0 またはバージョン &gt;= 1.2<br></td></tr><tr><td style="width: 50%; text-align: center;">&lt;1.1 &gt;1.1<br></td><td style="width: 50%; text-align: center;">バージョン1.1を除外する<br></td></tr></tbody></table><p><br>注：バージョンの数値は完全に一致している必要があります。たとえば、2.0は2.0.0とでは一致しません。</p></div><p id="35a4d51d-ec4a-46ca-a525-852c716328a2">コンテナリポジトリタグの不整合により、コンテナレジストリはバージョン範囲と互換性がありません。</p><h2 id="176362e7-d27e-4865-9f82-49c5e27cb13e">カスタム評価タイプ</h2><p id="849b5a09-33c7-422b-9c49-ad4d3a48a464">ProGetには、次の3つの評価タイプが組み込まれています。</p><ul <li="" class="bulleted-list" id="763f6006-6d9b-4d90-921f-5ccac32fd58e"><li>[Ignore (無視)] は、脆弱性レポートが適用できない、または無関係であることを示しているため、パッケージをダウンロードできます。</li></ul><ul <li="" class="bulleted-list" id="7fb3886c-44de-4376-901c-5c9cd7113e3d"><li>[Caution (注意)] は、脆弱性を回避するように注意するように開発者に指示します。パッケージはダウンロードできますが、WebUI (ユーザーインターフェイス)で警告が発行されます。</li></ul><ul <li="" class="bulleted-list" id="3180ea57-0724-45d8-a8e8-9f339be9b3ba"><li>[Blocked (ブロック済み)] は、脆弱性が深刻すぎて使用できないことを意味し、パッケージのダウンロードが妨げられています。</li></ul><p id="2daaa4f0-64b8-4406-b49a-596931ee4a5a">独自の評価タイプを、名前、有効期限、深刻度 (色)、およびパッケージがブロックされるかどうかを指定して、編集または作成できます。</p>

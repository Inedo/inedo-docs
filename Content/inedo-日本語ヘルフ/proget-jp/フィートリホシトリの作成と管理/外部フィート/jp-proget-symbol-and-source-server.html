---
title: "シンボルおよびソースサーバ"
order: 2
hidden: true
---

<p>ProGet の NuGet フィードは、Visual Studio や WinDbg などのデバッガと互換性のあるシンボル / ソースサーバとして構成できます。ProGet シンボルサーバでサポートされているのは次の通りです。</p><p>☑ Microsoft PDB フォーマット (C/C++、.NET)</p><p>☑ ソースサーバ</p><p>☑ ポータブル PDB フォーマット (.NET)</p><p>☒ コネクタパッケージ の PDB</p><p><p☒ <a="" href="/docs/installation/linux/docker-guide"><span style="color: rgb(34, 34, 34); font-family: Nunito, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: 0.48px; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">☒&nbsp;</span> Linux <a href="/docs/installation/linux/docker-guide">の</a><a href="/docs/installation/linux/docker-guide" rel="noopener noreferrer" target="_blank">&nbsp;ProGet</a>向けのソースサーバ</p☒></p><h2>シンボルへのアクセス</h2><p>シンボルサーバが有効になっている場合、次のシンボルサーバ URL からローカルのフィードパッケージに保存されているシンボルファイルにアクセスできます。</p><p>http://«proget-server»/symbols/«Feed»&nbsp;</p><h2>シンボルパッケージ</h2><p>ProGet では、 Symbols 引数でビルドされた NuGet シンボルパッケージを使用できます。これらのシンボルパッケージは、.pdb ファイルと、場合によってはソースファイルも含む標準の NuGet パッケージにすぎず、慣例としてファイルの拡張子が .<em>symbols.nupkg&nbsp;</em>または .<em>snupkg&nbsp;</em>となっています。NuGet は 2 つのパッケージ (1 つはシンボルありで、もう 1 つはシンボルなし) を生成します。2 つ生成するのは、片方は NuGet.org へのプッシュ、もう片方はシンボルフィードへのプッシュを行うためです。</p><p>ProGet がすべての NuGet フィードにシンボルを統合することから、2 つのパッケージを用意する必要はありません。むしろ、かえって逆効果になります。シンボルパッケージは慣例により「通常のパッケージ」とのみ異なっているため、両方を ProGet フィードにプッシュしようとすると、競合が発生します。その場合、「最後にプッシュされたパッケージ」が元のパッケージを上書きします。</p><p>つまり、シンボルサーバを使用する場合は、シンボルパッケージのみを&nbsp;ProGet&nbsp;フィードにプッシュする必要があります。NuGet パッケージでシンボルがダウンロードされないようにするには、[Symbol Server&nbsp;settings (シンボルサーバ設定)] の [Manage Feed (フィードの管理)] ページで、<em>trip symbol files from packages downloaded from this feed&nbsp;</em>(このフィードオプションからダウンロードしたパッケージからシンボルファイルを削除する) を参照してください。</p><h2>内部&nbsp;NuGet&nbsp;パッケージへのデバッグ</h2><p>ProGet のシンボル / ソースサーバを最大限に活用するには、公開された NuGet パッケージにデバッグ可能なすべてのアセンブリのシンボルファイル (pdb) が、パッケージの /src/ フォルダにソースファイルが存在している必要があります。詳細については、シンボルパッケージのビルドに関する情報が載っている <a href="http://docs.NuGet.org/docs/creating-packages/creating-and-publishing-a-symbol-package">NuGet documentation (NuGet ドキュメンテーション)</a> を参照してください。</p><figure class="block-color-gray_background callout" id="c306dcba-eb66-43ee-9e55-228ff5ce4346" style="box-sizing: border-box; -webkit-print-color-adjust: exact; margin: 1.25em 0px; break-inside: avoid; border-radius: 3px; padding: 1rem; background: rgb(235, 236, 237); color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial; display: flex;"><div style="box-sizing: border-box; -webkit-print-color-adjust: exact; font-size: 1.5em;"><span class="icon" style="box-sizing: border-box; -webkit-print-color-adjust: exact; display: inline-block; max-width: 1.2em; max-height: 1.2em; text-decoration: none; vertical-align: text-bottom; margin-right: 0.5em;">⛔</span></div><div style="box-sizing: border-box; -webkit-print-color-adjust: exact; width: 827.203px;">ProGet は、ポータブル PDB ファイルと従来の Microsoft PDB ファイルのインデックスを作成して返します。しかし、ポータブル PDB ファイルは透過的には書き換えられません。それが埋め込まれた NuGet パッケージのソースコードで使用できるようにするためです。ポータブル PDB ファイルに関連付けられたソースコードをデバッグする場合は、<a href="https://github.com/ctaggart/SourceLink">SourceLink</a> などのビルドツールを使用して、コンパイル中にソースファイルの URL (またはファイル自体) を埋め込むことを検討してください。 ProGet が Microsoft PDB ファイルを処理するのと同じ方法でポータブル PDB ファイルの書き換えを行いたい場合は、<a href="https://inedo.com/contact">ご連絡ください。</a></div></figure><h3>ProGet の構成</h3><p>ProGet が特定の NuGet フィードのシンボルを提供するには、それを行うための構成が必要となります。次のように、[Manage Feed (フィードの管理)] ページにアクセスし、Visual Studio 内で使用されるフィードのシンボルサーバの URL が正しいことと、[Symbol Server Configure] の下にあるオプションがチェックされていることを確認します。</p><p id="e27c755a-78cd-4d30-adb2-712a527b699d"><img src="/resources/docs/Untitled(3).png" class="fr-fil fr-dib fr-draggable"></p><figure class="image" id="d1582830-52f0-4345-be32-9d976948a045" style="box-sizing: border-box; -webkit-print-color-adjust: exact; margin: 1.5em 0px; break-inside: avoid; border: none; padding: 0px; border-radius: 0px; text-align: center; color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><br></figure><h3>インデックス付きシンボルの検証</h3><p>シンボル付きのパッケージがフィードにアップロードされると、[Package Details (パッケージの詳細)] ページでシンボルがインデックスに登録されているかどうか、およびパッケージにソースが含まれているかどうかが次の通りわかります。</p><p><br></p><figure class="image" id="790e944e-6a5f-47a1-a22c-e3067b118e00" style="box-sizing: border-box; -webkit-print-color-adjust: exact; margin: 1.5em 0px; break-inside: avoid; border: none; padding: 0px; border-radius: 0px; text-align: center; color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><img src="/resources/docs/Untitled%201.png" class="fr-fil fr-dib fr-draggable"></figure><p><em>Download Package with Symbols&nbsp;</em>(シンボル付きパッケージのダウンロード) のリンク (フィードがシンボルを削除するように構成されている場合に表示されます) をクリックすると、パッケージのダウンロードと内容の確認が行えます。</p><h2>Visual Studio の構成</h2><h3>シンボルサーバのサポートを有効にする</h3><p>NuGet パッケージライブラリにデバッグするには、ProGet をシンボルサーバとして使用するように Visual Studio を構成する必要があります。メニューバーから [Debug (デバッグ)]&gt; [Options... (オプション)] を選択し、ツリーメニューで [Debugging (デバッグ)]&gt; [Symbol (シンボル)]&nbsp;をクリックします。先ほどの [Manage Feed (フィードの管理)] ページにあるシンボルサーバの URL を追加し、シンボルキャッシュディレクトリを指定します。デフォルトでは、Visual Studio は %LOCALAPPDATA%\Temp\SymbolCache を使用しますが、任意のパスも指定できます。</p><p><br></p><figure class="image" id="6d5ba372-6810-40a0-bc39-538951cccfd4" style="box-sizing: border-box; -webkit-print-color-adjust: exact; margin: 1.5em 0px; break-inside: avoid; border: none; padding: 0px; border-radius: 0px; text-align: center; color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><img src="/resources/docs/Untitled%202.png" class="fr-fil fr-dib fr-draggable"></figure><h3>ソースサーバサポートを有効にする</h3><p>ソースサーバのサポートを構成するには、デバッグオプションツリーメニューで [Debugging (デバッグ)] &gt; [General (一般)]&nbsp;を参照し、設定のオンオフが次の通りになっていることを確認します。</p><p>☐ Enable Just My Code</p><p>☑ Enable source server support</p><p>また、次のオプションのチェックを外さないといけない場合もあります。</p><p>☐ Enable .NET Framework Source Stepping</p><p>場合によっては、次のような設定になるケースもあります。</p><p><br></p><figure class="image" id="03066318-b692-4e6a-8521-7d4b32412643" style="box-sizing: border-box; -webkit-print-color-adjust: exact; margin: 1.5em 0px; break-inside: avoid; border: none; padding: 0px; border-radius: 0px; text-align: center; color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><img src="/resources/docs/Untitled%203.png" class="fr-fil fr-dib fr-draggable"></figure><h3>構成のテスト</h3><p>構成をテストするには、シンボルを含む NuGet パッケージを使用するコンソールアプリケーションを作成し、例外をスローする使い捨てコードを書いてから、Visual Studio の [Start (スタート)] ボタンをクリックしてデバッグを開始するのが簡単です。</p><p>すべてが正しく構成されている場合、Visual Studio はシンボルをローカルへ読み込もうとします。その際にシンボルが見つからない場合、ProGet シンボルサーバにクエリを実行し、例外のスローを行う行が次のようにハイライトされます。</p><h3>トラブルシューティング</h3><p>シンボルサーバの失敗の原因はいろいろありますが、最も一般的なのは設定の誤りです。 &nbsp;Visual Studio がロードした PDB を表示するには、デバッグ中に [Debug (デバッグ)] &gt; [Windows] &gt; [Module (モジュール)] メニューオプションを選択し、リストから目的の DLL を見つけます。シンボルステータスが、DLL とダウンロードされたシンボルの両方へのバージョンとパスとともに表示されます。</p><p><br></p><figure class="image" id="73cc6ad5-045d-4832-89b2-ec825f83576d" style="box-sizing: border-box; -webkit-print-color-adjust: exact; margin: 1.5em 0px; break-inside: avoid; border: none; padding: 0px; border-radius: 0px; text-align: center; color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><img src="/resources/docs/Untitled%204.png" class="fr-fil fr-dib fr-draggable" style="box-sizing: border-box; border-style: none; vertical-align: top; cursor: pointer; padding: 0px 1px; position: relative; max-width: 100%; margin: 5px auto 5px 0px; display: block; float: none; text-align: left; color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;">DLL を右クリックして [Symbol Load Information... (シンボルのロード情報)] を選択すると、そのライブラリのシンボルサーバに関連付けられている診断メッセージを表示できます。これはシンボルがロードされているかどうかに関係なく表示可能です。</figure><p><br></p><figure class="image" id="9590ce9a-9732-480b-a921-73310a1de934" style="box-sizing: border-box; -webkit-print-color-adjust: exact; margin: 1.5em 0px; break-inside: avoid; border: none; padding: 0px; border-radius: 0px; text-align: center; color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><img src="/resources/docs/Untitled%205.png" class="fr-fil fr-dib fr-draggable"></figure><p>ファイルパスの 16 進数の文字列では、次の通り、その先頭が ProGet にリストされている GUID になっているはずです。</p><figure class="image" id="3f053ef1-9b6b-4f41-80ac-710e350f51f1" style="box-sizing: border-box; -webkit-print-color-adjust: exact; margin: 1.5em 0px; break-inside: avoid; border: none; padding: 0px; border-radius: 0px; text-align: center; color: rgb(55, 53, 47); font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Helvetica, &quot;Apple Color Emoji&quot;, Arial, sans-serif, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;; font-size: medium; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-indent: 0px; text-transform: none; white-space: pre-wrap; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-thickness: initial; text-decoration-style: initial; text-decoration-color: initial;"><img src="/resources/docs/Untitled%206.png" class="fr-fil fr-dib fr-draggable"></figure><h3>一般的なエラー</h3><p>今までサポートに寄せられたもので、最も一般的なエラーは次のとおりです。</p><ul><li>間違った URL を使用している。例えば、http://«proget-server»/symbols/«feed-name» とすべきところが http://«proget-server»/NuGet/«feed-name» となっている。</li><li>両方の NuGet パッケージ (シンボルありとなし) をプッシュしている。</li><li>コネクタパッケージのシンボルの使用を試みている (この方法はサポートされていません。回避策としては、パッケージをローカルにプルするか、シンボルに別のフィードを使用してください)。</li><li>.nupkg ファイルのルートにある/src/ ディレクトリの下にソースファイルがない。</li><li>ProGet にプルされたときにパッケージが再作成するシンボルサーバを構成している。これは、アプリケーションで <a href="https://docs.microsoft.com/en-us/NuGet/reference/errors-and-warnings/nu3008">NuGet Error NU3008</a> が発生する原因となることがあります。</li></ul><p><br></p>

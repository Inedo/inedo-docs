---
title: "Debian (apt) フィードのホスト"
order: 4
hidden: true
---

<h2><strong>ProGet で Debian フィードをホストする方法</strong></h2><p><a href="https://www.debian.org/">Debian</a> は、無料で利用できるLinuxOSのディストリビューション（種類）のひとつです。</p><p>Debian のソフトウェアは、パッケージ管理コマンド「APT」で、インストール、アップデート、アンインストールできます。</p><p>ProGet v5.2 以降では、ProGet サーバに Debian フィードをホストして、Debian のパッケージをインストール、アップデート、アンインストールできます。</p><h2>フィードを設定する前にすること</h2><h3>1. <strong>ProGet&nbsp;内に署名鍵を作成する</strong></h3><p>Debian&nbsp;のフィードからパッケージを入手するには、ProGet&nbsp;内に署名鍵が作成されていることが前提条件となります。</p><p>フィードが作成されたら、[Manage Feed (フィードの管理)]&nbsp;ページにアクセスし、[Properties (プロパティ)]&nbsp;パネルで&nbsp;[manage keys (キーの管理)]&nbsp;を選択してください。詳細を入力し&nbsp;[Generate Key (キーの作成)]&nbsp;をクリックします。</p><p>1つのみ作成する場合には、簡単に「proget」や「default」などを入力してもけっこうです。</p><p>少し待つとキーが完成し、そのフィンガープリントが&nbsp;[Manage Keys (キーの管理)]&nbsp;のウィンドウに表示されます。</p><h3><strong>クライアントの設定</strong></h3><p>ProGet&nbsp;から Debian パッケージをインストールするには、各クライアントで次の手順を実行してください。</p><h3><strong>1.署名鍵を追加する</strong></h3><p>キーを apt に追加するには、次のコマンドを実行します。</p><pre><code class="language-powershell" data-language="powershell">wget -O "deb.gpg" http://{proget-server}/debian-feeds/{feed-name}.pub &amp;&amp; sudo apt-key add "{feed-name}.gpg" 
echo "deb http://{proget-server}/ {feed-name} {component-name}" | sudo tee /etc/apt/sources.list.d/{proget-deb}.listt</code></pre><p>ProGet でまだ署名鍵を作成しておらず、公開鍵束（公開鍵をまとめて入れておくところ）にも追加していない場合には、次のようなメッセージが表示されることがあります。</p><p>「N: Updating from such a repository can't be done securely, and is therefore disabled by default.（N：このリポジトリからはアップデートが安全に実行できないため、デフォルトではアップデートが無効になっています。）」</p><h3><strong>2.aptをアップデートする</strong></h3><p>ProGet&nbsp;のフィードから実際にパッケージのインストールを始めるには、次のようにパッケージキャッシュをアップデートします。</p><pre><code class="lang-powershell" data-language="powershell">sudo&nbsp;apt update
</code></pre><h2><strong>共通タスク</strong></h2><h3><strong>パッケージのインストール</strong></h3><p>Debian パッケージは&nbsp;<a href="https://manpages.debian.org/stretch/apt/apt-get.html">apt-get</a> を使用してインストールします。ProGet&nbsp;をホストとしてパッケージをインストールするには、次のコマンドを使用します。</p><pre><code class="lang-powershell" data-language="powershell">sudo&nbsp;apt install "{package-name}"
</code></pre><h3><strong>パッケージの作成</strong></h3><p>Debian パッケージの作成方法については、Debian管理者ハンドブック、「<a href="https://debian-handbook.info/browse/ja-JP/stable/debian-packaging.html">第 15 章 Debian パッケージの作成</a>」を参照してください。</p><h3><strong>パッケージの公開</strong></h3><p>apt&nbsp;はパッケージのアップロードについてはサポートしていません。そこで&nbsp;ProGet&nbsp;は&nbsp;Debian&nbsp;パッケージを公開するために、いくつかの方法を提案しています。</p><h4><strong>ProGet web&nbsp;アプリからのアップロードする方法</strong></h4><p>ProGet の「フィード」ページから、「Add Package (パッケージの追加)」と「Upload Debian Package (Debian&nbsp;パッケージのアップロード)」を選択して、&nbsp;dpkg-deb&nbsp;コマンドによって作成された.debファイルをアップロードします。</p><h4><strong>HTTP経由で公開</strong></h4><p>HTTP&nbsp;経由で&nbsp;Debian&nbsp;パッケージをプッシュするには、パッケージファイルをコンテンツとしてPUTまたはPOSTリクエストをかけます：</p><pre><code class="lang-jsx" data-language="jsx">curl http://{proget-server}/debian-packages/upload/{feed-name}/{component-name}/{package-name}.deb --user &lt;user&gt;:&lt;password&gt; --upload-file {my-package}.deb
</code></pre><p><strong>例：</strong></p><p><strong>cURL:</strong></p><pre><code class="lang-powershell" data-language="powershell">curl http://{proget-server}/debian-packages/upload/{feed-name}/{component-name}/{package-name}.deb --user &lt;user&gt;:&lt;password&gt; --upload-file {my-package}.deb
</code></pre><p><strong>wget:</strong></p><pre><code class="lang-powershell" data-language="powershell">wget http://{proget-server}/debian-packages/upload/{feed-name}/{component-name}/{package-name}.deb --http-user &lt;user&gt; --http-password &lt;password&gt; --method POST --body-file {my-package}.deb
</code></pre><p><strong>PowerShell:</strong></p><pre><code class="lang-powershell" data-language="powershell">Invoke-WebRequest http://{proget-server}/debian-packages/upload/{feed-name}/{component-name}/{package-name}.deb -Credential [System.Net.NetworkCredential]::new('&lt;user&gt;', '&lt;password&gt;') -Method PUT -InFile {my-package}.deb
</code></pre><h2><strong>技術的な制限</strong></h2><ul><li>Debianフィードのコネクタはサポートされていません。</li><li>BouncyCastle&nbsp;ライブラリで&nbsp;Armored output&nbsp;で無効性を示すエラーが発生する問題点があるため、&nbsp;<strong>InRelease</strong> のエンドポイント（つまり、クリア署名されたインデックス）には現在対応していません。需要が見込まれる場合には、将来メンテナンスリリースすることを検討いたします。</li></ul><h3><strong>ソースパッケージ</strong></h3><p>ProGetは現在<a href="https://wiki.debian.org/Packaging/SourcePackage%22%20/">Debianソースパッケージ</a>をサポートしておらず、ソースパッケージをアップロードしようとすると（拡張子が* .debではない場合などには）失敗します。</p>
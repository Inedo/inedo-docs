---
title: "コンテナの使用状況を自動追跡"
order: 5
---

<p>ProGetは、Otter や Kubernetes などの外部リソースに接続して、Docker コンテナイメージが使用されている場所を収集して表示できます。</p><h2>コンテナスキャナを構成する</h2><p>コンテナの使用状況を表示するには、まず [Manage Feed (フィードの管理)] ＞ [Usage &amp; Scanning (使用状況&amp;スキャン)] ページからコンテナスキャナを構成する必要があります。</p><p>コンテナスキャナは拡張可能コンポーネントなので、<a href="/docs/proget-extensions" rel="nofollow noopener noreferrer" style="box-sizing: border-box; -webkit-print-color-adjust: exact; color: inherit; text-decoration: underline;" target="_blank" translate="no">拡張機能を作成</a>できます。</p><ul><li>Otter</li><li>Kubernetes</li></ul><h2>Otter&nbsp;の設定</h2><p>サーバーからコンテナの使用状況の情報を収集するよう Otter を設定できます。設定の手順については、Otterドキュメンテーション内のサーバパッケージをご覧ください。</p><p>Otter&nbsp;がコンテナデータを収集するように設定したあと、パッケージ/コンテナ使用状況 API&nbsp;へのアクセスを許可するための&nbsp;API&nbsp;キーを作成する必要があります。</p><p>キーが作成されると、OtterスキャナをProGetに追加する準備が整います。</p><h2>Kubernetesの設定</h2><p>ProGetは、Kubernetesクラスタをスキャンし、ProGetに蓄積されているイメージの中で現在使用されているものを特定できます。これは Kubernetes&nbsp;API を通して Kubernetes に接続することが必須です。</p><h3>Kubernetes API</h3><p>Kubernetes Web APIを使用した場合、ProGetはインフラストラクチャ内で使用中のイメージをスキャンして探すことができます。Kubernetes&nbsp;APIがデフォルトで&nbsp;有効化されていない場合もあります。Kubernetes&nbsp;APIへのアクセスを有効にするには、以下のコマンドを実行してください。</p><p>kubectl&nbsp;proxy --port=8080</p><p>APIが検知するポートを特定します。</p><h3>Kubernetes APIの認証</h3><p>認証を実行する方法はさまざまです。Kubernetes APIの認証についての 詳しい情報は<a href="https://kubernetes.io/docs/reference/access-authn-authz/authentication/" style="box-sizing: border-box; -webkit-print-color-adjust: exact; color: inherit; text-decoration: underline;">認証ドキュメンテーション</a>（リンク先英語）からご覧いただけます。現在、ProGetはベーシックな認証とBearerトークンに対応しています。</p><h3>Kubernetesスキャナの作成</h3><p>ProGetによるKubernetesクラスタのスキャンを許可するには、[Administration (管理)] ＞ [Exstentions&nbsp;(拡張機能)]&nbsp;からKubernetes拡張機能をインストールする必要があります。</p><p>ソースを作成したらKubernetes APIのURLを入力し、APIへの接続に必要な認証の種類を選びます。[User Name (ユーザー名)] と [Password (パスワード)] のフィールドは、 [Basic Authentication (ベーシック認証)]にのみ使用します。[Bearer Token (Bearerトークン)] 認証を選んだ場合は、Bearerトークンが必要です。</p><h3>Kubernetesスキャナをフィードに追加する</h3><p>Kubernetesスキャナは、一つ、または二つ以上のコンテナレジストリに使用できます。レジストリにスキャナを追加するには、まずスキャナを追加したいフィードに移動してください。次に、右上の [Manage Feed (フィードの管理)]&nbsp;ボタン、 [Usage (使用状況)]&nbsp;のタブの順にクリックします。[Feed&nbsp;Conrainer&nbsp;Usage Scanner Sources (フィードコンテナ使用状況スキャナソース)]&nbsp;テーブルの上部にある&nbsp;[add (追加)]&nbsp;のリンクをクリックすると、スキャナをレジストリに追加できます。</p><h3>コンテナの使用状況を確認する</h3><p>データが収集されると、ProGet内のコンテナイメージに [Usage (使用状況)] のタブが表示されます。このタブをクリックすると、イメージを使用している全てのサーバと、コンテナ名やステータスなどその他の関連情報が表示されます。</p>
